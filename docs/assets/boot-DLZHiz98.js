(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=a(o);fetch(o.href,n)}})();function w(e,t){var a=t||"Request failed";return e&&typeof e=="object"&&(e.errors&&Array.isArray(e.errors)&&e.errors[0]&&typeof e.errors[0].message=="string"?a=e.errors[0].message:typeof e.message=="string"&&(a=e.message)),a}const E="https://v2.api.noroff.dev",I="3e0a65ee-1d88-4fb0-9962-797226b01b32";function C(e,t){localStorage.setItem(e,t)}function N(e){return localStorage.getItem(e)}let i=null;function g(){const e=document.createElement("div");e.id="global-loader",Object.assign(e.style,{position:"fixed",inset:"0",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--color-bg)",zIndex:"9999"});const t=document.createElement("div");return t.className="spinner",t.setAttribute("role","status"),t.setAttribute("aria-label","Loading"),e.appendChild(t),e}function O(){i||(i=g()),document.body.contains(i)||document.body.appendChild(i)}function x(){i&&document.body.contains(i)&&document.body.removeChild(i)}function y(){let e=document.getElementById("toast-viewport");return e||(e=document.createElement("div"),e.id="toast-viewport",e.setAttribute("aria-live","polite"),Object.assign(e.style,{position:"fixed",left:"0",right:"0",bottom:"1rem",display:"grid",placeItems:"center",gap:"0.5rem",zIndex:"10000",pointerEvents:"none"}),document.body.appendChild(e)),e}function h(e,t={}){const{type:a,duration:s}={type:"default",duration:2500,...t},o=Math.max(1200,Number(s)||2500),n=y(),r=document.createElement("div");r.className="toast";const m={success:"#166534",error:"#991b1b",info:"#1e3a8a",default:"#111827"}[String(a)]||"#111827";Object.assign(r.style,{pointerEvents:"auto",color:"#fff",borderRadius:"0.5rem",padding:"0.6rem 0.9rem",fontSize:"0.95rem",boxShadow:"0 10px 34px rgba(0,0,0,0.18)",opacity:"0",transform:"translateY(6px)",transition:"opacity .18s ease, transform .18s ease",background:m}),r.textContent=e,n.appendChild(r),requestAnimationFrame(()=>{r.style.opacity="1",r.style.transform="translateY(0)"});const u=()=>{r.style.opacity="0",r.style.transform="translateY(6px)",window.setTimeout(()=>r.remove(),180)},p=window.setTimeout(u,o);r.addEventListener("click",()=>{clearTimeout(p),u()})}const l="flash:message";function b(e,t="success",a=2500){try{sessionStorage.setItem(l,JSON.stringify({message:e,type:t,duration:a}))}catch(s){console.warn("Could not set flash:",s)}}function v(){try{const e=sessionStorage.getItem(l);if(!e)return;sessionStorage.removeItem(l);const t=JSON.parse(e);t&&t.message&&h(String(t.message),{...t.type&&{type:t.type},...t.duration&&{duration:t.duration}})}catch{}}function S(){try{const e=localStorage.getItem("accessToken");return!!(e&&String(e).trim())}catch{return!1}}function L(){try{return localStorage.getItem("profileName")?.trim()||""}catch{return""}}function c(e,t,a={}){const s=document.createElement("li"),o=document.createElement("a");o.href=e,o.textContent=t;for(const[n,r]of Object.entries(a))o.setAttribute(n,String(r));return s.appendChild(o),s}function d(){const e=document.querySelector(".nav .nav-links");if(!e)return;e.innerHTML="";const t=S(),a=L();if(e.appendChild(c("feed.html","Feed")),t&&a){e.appendChild(c(`profile.html?name=${encodeURIComponent(a)}`,"My Profile"));const s=c("#","Logout",{"data-role":"logout"}),o=s.querySelector("a");o&&o.addEventListener("click",n=>{n.preventDefault();try{["accessToken","profileName","profileEmail"].forEach(r=>localStorage.removeItem(r))}catch(r){console.warn("Failed to clear auth storage:",r)}finally{b("You have been logged out.","info",2200),d(),window.location.href="index.html"}}),e.appendChild(s)}else e.appendChild(c("login.html","Login")),e.appendChild(c("register.html","Register"))}window.addEventListener("storage",e=>{(e.key==="accessToken"||e.key==="profileName")&&d()});function f(){d(),v()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f,{once:!0}):f();export{E as B,I as N,C as a,b,w as e,N as g,x as h,O as s};
